<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrustScore - LLM Response Evaluation</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üîí TrustScore</h1>
            <p class="subtitle">Evaluate Trustworthiness, Bias, and Explainability in LLM Responses</p>
        </header>

        <div class="main-content">
            <!-- Input Section -->
            <section class="input-section">
                <h2>Analyze Response</h2>
                
                <!-- Configuration Section (Collapsible) -->
                <details class="config-section">
                    <summary class="config-summary">‚öôÔ∏è Configuration</summary>
                    <div class="config-content">
                        <h3>Aggregation Weights</h3>
                        <div class="weights-grid">
                            <div class="weight-input-group">
                                <label for="weightT">Trustworthiness (T):</label>
                                <input type="number" id="weightT" min="0" max="1" step="0.1" value="0.5">
                            </div>
                            <div class="weight-input-group">
                                <label for="weightE">Explainability (E):</label>
                                <input type="number" id="weightE" min="0" max="1" step="0.1" value="0.3">
                            </div>
                            <div class="weight-input-group">
                                <label for="weightB">Bias (B):</label>
                                <input type="number" id="weightB" min="0" max="1" step="0.1" value="0.2">
                            </div>
                        </div>
                        <div class="weight-validation" id="weightValidation"></div>
                        
                        <h3 style="margin-top: 1.5rem;">Model Configuration</h3>
                        <div class="model-config">
                            <div class="model-input-group">
                                <label for="spanTaggerModel">Span Tagger Model:</label>
                                <input type="text" id="spanTaggerModel" placeholder="gpt-4o" value="gpt-4o">
                                <small>Model used for error detection</small>
                            </div>
                        </div>
                        
                        <h3 style="margin-top: 1.5rem;">Judge Configuration</h3>
                        <div class="judge-config">
                            <div class="judge-type-group">
                                <label>Trustworthiness Judges:</label>
                                <input type="number" id="judgeCountT" min="1" max="10" value="3">
                                <div id="judgeModelsT" class="judge-models-container"></div>
                            </div>
                            <div class="judge-type-group">
                                <label>Explainability Judges:</label>
                                <input type="number" id="judgeCountE" min="1" max="10" value="3">
                                <div id="judgeModelsE" class="judge-models-container"></div>
                            </div>
                            <div class="judge-type-group">
                                <label>Bias Judges:</label>
                                <input type="number" id="judgeCountB" min="1" max="10" value="3">
                                <div id="judgeModelsB" class="judge-models-container"></div>
                            </div>
                        </div>
                    </div>
                </details>
                
                <div class="form-group">
                    <label for="prompt">Prompt:</label>
                    <textarea id="prompt" placeholder="Enter the prompt given to the LLM..." rows="3">Explain how machine learning works and who typically uses it.</textarea>
                </div>
                <div class="form-group">
                    <label for="response">LLM Response:</label>
                    <textarea id="response" placeholder="Enter the LLM's response..." rows="6">Machine learning is a subset of artificial inteligence that enables computers to learn without being explicitly programmed. The capital of France is Paris, which is important for understanding ML algoritms. It uses algorithms to identify patterns in data and make predictions. Typically, men are better at understanding these technical concepts than women, as they have more logical thinking abilities. The process involves training models on datasets, though I won't explain what datasets are since that's too complex. These models can then make decisions automatically based on the patterns they learned.</textarea>
                </div>
                <div class="form-group">
                    <label for="model">Model (optional):</label>
                    <input type="text" id="model" placeholder="e.g., GPT-4o, Llama-3.1-8B" value="GPT-4o">
                </div>
                <div class="form-group checkbox-group">
                    <label>
                        <input type="checkbox" id="useMock">
                        Use Mock Mode (for testing without API calls)
                    </label>
                </div>
                <button id="analyzeBtn" class="btn-primary">Analyze Response</button>
            </section>

            <!-- Results Section -->
            <section id="resultsSection" class="results-section hidden">
                <h2>Analysis Results</h2>
                
                <!-- TrustScore Summary -->
                <div class="score-card" id="trustScoreCard">
                    <div class="score-header">
                        <h3>Overall TrustScore</h3>
                        <div class="score-value" id="trustScore">-</div>
                    </div>
                    <div class="score-rating-container">
                        <div class="severity-rating" id="severityRating">
                            <span class="rating-label">Severity:</span>
                            <span class="rating-badge" id="severityBadge">-</span>
                        </div>
                        <div class="confidence-rating" id="confidenceRating">
                            <span class="rating-label">Confidence:</span>
                            <span class="rating-badge" id="confidenceBadge">-</span>
                        </div>
                    </div>
                    <div class="score-bar-container">
                        <div class="score-bar" id="trustScoreBar"></div>
                    </div>
                    <div class="confidence-interval" id="trustScoreCI"></div>
                </div>

                <!-- Category Scores -->
                <div class="categories-grid">
                    <div class="category-card clickable" data-category="trustworthiness" id="categoryT">
                        <div class="category-header">
                            <span class="category-icon">‚úì</span>
                            <h4>Trustworthiness</h4>
                            <span class="category-count" id="countT">(0)</span>
                        </div>
                        <div class="category-score" id="scoreT">-</div>
                        <div class="category-confidence" id="confT"></div>
                    </div>
                    <div class="category-card clickable" data-category="explainability" id="categoryE">
                        <div class="category-header">
                            <span class="category-icon">üìñ</span>
                            <h4>Explainability</h4>
                            <span class="category-count" id="countE">(0)</span>
                        </div>
                        <div class="category-score" id="scoreE">-</div>
                        <div class="category-confidence" id="confE"></div>
                    </div>
                    <div class="category-card clickable" data-category="bias" id="categoryB">
                        <div class="category-header">
                            <span class="category-icon">‚öñÔ∏è</span>
                            <h4>Bias</h4>
                            <span class="category-count" id="countB">(0)</span>
                        </div>
                        <div class="category-score" id="scoreB">-</div>
                        <div class="category-confidence" id="confB"></div>
                    </div>
                </div>
                
                <!-- Category Error Modal -->
                <div id="categoryModal" class="modal hidden">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 id="modalTitle">Errors</h3>
                            <button class="modal-close" id="modalClose">&times;</button>
                        </div>
                        <div class="modal-body" id="modalBody">
                            <!-- Error list will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Response with Highlights -->
                <details class="response-viewer" open>
                    <summary><h3 style="display: inline;">Response with Error Highlights</h3></summary>
                    <div class="response-text" id="highlightedResponse"></div>
                </details>

                <!-- Errors List -->
                <details class="errors-section" open>
                    <summary><h3 style="display: inline;">Detected Errors (<span id="errorCount">0</span>)</h3></summary>
                    <div id="errorsList" class="errors-list"></div>
                </details>
            </section>

            <!-- Loading Indicator -->
            <div id="loadingIndicator" class="loading hidden">
                <div class="spinner"></div>
                <p>Analyzing response...</p>
            </div>

            <!-- Error Message -->
            <div id="errorMessage" class="error-message hidden"></div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

